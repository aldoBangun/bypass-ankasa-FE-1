import Head from 'next/head';
import React from 'react';
import axios from 'axios';
import FormResult from '../../components/organisms/formResult';

export async function getServerSideProps(context) {
   const { id } = context.query;
   const { origin } = context.query;
   const { destination } = context.query;
   const { departure } = context.query;
   const { class_category } = context.query;
   const response = await axios({
      method: 'GET',
      url: `https://bypass-ankasa-backend.herokuapp.com/tickets/detail?origin=${origin}&destination=${destination}&departure=${departure}&class_category=${class_category}`,
      // url: `https://bypass-ankasa-backend.herokuapp.com/tickets`,
   });
   return {
      props: {
         data: response?.data?.data,
         origin: origin,
         destination: destination,
      },
   };
}

function result({ data, origin, destination }) {
   return (
      <>
         <Head>
            <title>Ankasa - Search Result</title>
            <meta name="description" content="Generated by create next app" />
            <link rel="icon" href="/vector.png" />
         </Head>
         <div className={`d-flex justify-content-center`}>
            <FormResult data={data} origin={origin} destination={destination} />
         </div>
      </>
   );
}

export default result;
